"use strict";angular.module("Config",[]).constant("ENV",{type:"production",url:"http://ccapi.classcompete.com/v2"}).constant("ACCESS_LEVEL",{pub:1,registered:2,auth:3}).constant("IMG",{type:"production",url:"http://images.classcompete.com"}).constant("SOCIAL_ID",{FACEBOOK_ID:"225058110951151",GOOGLE_ID:"886463280515-u6d66bo6pvfo6of9s8cvjbq7s4tj1p2m.apps.googleusercontent.com"}).constant("STRIPE",{key:"pk_live_KPkwf1TgQYSIU6pXRDtaWTtU"}),angular.module("ccompparentApp",["ngAnimate","ngCookies","ngRoute","ngSanitize","ngResource","Config","angular-loading-bar","signup","security","home","navigation","header","classcode","students","support","shop","account","accountRecovery","localytics.directives","directives","httpInterceptor","ezfb","navigationService","ui.bootstrap","angulartics","angulartics.google.tagmanager"]).config(["$routeProvider","ezfbProvider","SOCIAL_ID","$httpProvider","cfpLoadingBarProvider","$analyticsProvider",function(a,b,c,d,e,f){f.firstPageview(!0),f.withAutoBase(!0),delete d.defaults.headers.common["X-Requested-With"],a.otherwise({redirectTo:"/signup"}),b.setInitParams({appId:c.FACEBOOK_ID}),e.includeSpinner=!1}]).run(["Security","$rootScope","$location","ACCESS_LEVEL","IMG",function(a,b,c,d,e){b.imageUrl=e.url,a.requestCurrentUser(),b.$on("$routeChangeStart",function(b,c){a.isAuthenticated()&&"/signup"===c.originalPath&&a.logout()})}]);var MainCtrl=function(a,b,c,d,e){a.isOpen=d.open,a.logout=function(){c.logout(),d.menuLogout(),b.path("/signup")},a.isActive=function(a){return a===b.path()},a.loggedIn=function(){return c.isAuthenticated()},a.menuOpen=function(){d.menu(1===d.open?0:1)},a.showCheckout=function(){return e.items.length>0?!0:!1},a.$watch(function(){return c.currentUser},function(b){a.currentUser=b}),a.goTo=function(){$(window).width()<1024&&(d.open=0,$("body").animate({"padding-left":"0"}),$(".main-nav ul").animate({left:"-170px"}),$(".main-nav-trigger").html("Open menu"))}};MainCtrl.$inject=["$scope","$location","Security","NavigationService","ShoppingCart"],angular.module("ccompparentApp").controller("MainCtrl",MainCtrl),angular.module("signup",["signup-login","signup-registration","validation","steps","signup.social"]).config(["$routeProvider",function(a){a.when("/signup",{templateUrl:"views/signup/signup.html"})}]),angular.module("signup-login",{});var LoginCtrl=function(a,b,c,d,e,f,g,h,i){this.rootScope=a,this.security=c,this.location=d,this.loginValidation=e,this.credentialValidation=g,this.notification=f,this.credentialsFactory=h,this.forgotCredentialsView=!1,this.forgotCredentials={email:""},this.user={username:"",password:""},this.ACCESS_LEVEL=i};LoginCtrl.prototype.login=function(){var a=this;return this.loginValidation.run(this.user)===!1?void this.notification.showMessage(this.loginValidation.getErrors(),"Login form","error"):void this.security.login(this.user).then(function(b){b.intro===a.ACCESS_LEVEL.registered?a.location.path("/setup_student"):b.intro===a.ACCESS_LEVEL.auth&&b.valid&&a.location.path("/home")})},LoginCtrl.prototype.requestCredentials=function(){var a=this;return this.credentialValidation.run(this.forgotCredentials)===!1?void this.notification.showMessage(this.credentialValidation.getErrors(),"Forgot credentials","error"):void this.credentialsFactory.save(this.forgotCredentials).$promise.then(function(b){a.notification.info(b.message,"Info")})},LoginCtrl.$inject=["$rootScope","$log","Security","$location","LoginValidation","NotificationService","CredentialValidation","CredentialsFactory","ACCESS_LEVEL"],angular.module("signup-login").controller("LoginCtrl",LoginCtrl);var CredentialValidation=function(a){var b=[];b.push({name:"email",display:"Email",rules:"required|valid_email"});var c=new a(b);this.run=function(a){return c.run(a)},this.getErrors=function(){return c.getErrors()}};CredentialValidation.$inject=["BaseValidation"],angular.module("signup-login").service("CredentialValidation",CredentialValidation),angular.module("signup-registration",["resources.country"]);var LoginValidation=function(a){var b=[];b.push({name:"username",display:"Login username",rules:"required|min_length[5]"}),b.push({name:"password",display:"Login password",rules:"required|min_length[5]"});var c=new a(b);this.run=function(a){return c.run(a)},this.getErrors=function(){return c.getErrors()}};LoginValidation.$inject=["BaseValidation"],angular.module("signup-login").service("LoginValidation",LoginValidation);var RegistrationCtrl=function(a,b,c,d,e,f,g){var h=this;this.location=d,this.security=c,this.registerValidation=e,this.notification=f,this.user={country:"",postalCode:"",firstName:"",lastName:"",email:"",username:"",password:"",retypePassword:""},this.countries=[],g.query().$promise.then(function(a){h.countries=a})};RegistrationCtrl.prototype.register=function(){var a=this;return this.registerValidation.run(this.user)===!1?void this.notification.showMessage(this.registerValidation.getErrors(),"Registration form","error"):void this.security.register(this.user).then(function(b){b&&a.location.path("/setup_student")})},RegistrationCtrl.$inject=["$rootScope","$log","Security","$location","RegisterValidation","NotificationService","CountryFactory"],angular.module("signup-registration").controller("RegistrationCtrl",RegistrationCtrl);var RegisterValidation=function(a){var b=[];b.push({name:"country",display:"Country",rules:"required"}),b.push({name:"postalCode",display:"Postal code",rules:"required"}),b.push({name:"firstName",display:"First name",rules:"required|min_length[3]"}),b.push({name:"lastName",display:"Last name",rules:"required|min_length[3]"}),b.push({name:"email",display:"Email",rules:"required|valid_email"}),b.push({name:"password",display:"Password",rules:"required|min_length[6]"}),b.push({name:"retypePassword",display:"Retype password",rules:"required|min_length[6]|matches[password]"});var c=new a(b);this.run=function(a){return c.run(a)},this.getErrors=function(){return c.getErrors()}};RegisterValidation.$inject=["BaseValidation"],angular.module("signup-registration").service("RegisterValidation",RegisterValidation),angular.module("signup.social",["ngResource"]);var SocialCtrl=function(a,b,c,d,e){this.ezfb=a,this.security=b,this.$location=c,this.SOCIAL_ID=d;var f=this;e.$on("event:google-plus-sign-success",function(){gapi.client.load("plus","v1",function(){var a=gapi.client.plus.people.get({userId:"me"});a.execute(function(a){var b=a.emails.filter(function(a){return"account"===a.type})[0].value,c={firstName:a.name.givenName,lastName:a.name.familyName,email:b,code:a.id,social:"google"};f.security.loginGoogle(c).then(function(a){a.loggedIn&&f.$location.path("new"===a.type?"/setup_student":"/home")})})})})};SocialCtrl.prototype.facebookLogin=function(){var a=this;this.ezfb.login(function(b){b.authResponse&&a.ezfb.api("/me",function(b){var c={code:b.id,email:b.email,firstName:b.first_name,lastName:b.last_name};a.security.loginFacebook(c).then(function(b){b.loggedIn&&a.$location.path("new"===b.type?"/setup_student":"/home")})})},{scope:"email"})},SocialCtrl.$inject=["ezfb","Security","$location","SOCIAL_ID","$scope"],angular.module("signup.social").controller("SocialCtrl",SocialCtrl),angular.module("signup.social").directive("googlesignin",["$window","SOCIAL_ID",function(a,b){return{restrict:"A",controller:["$scope",function(c){c.google_login=function(){gapi.auth.signIn({clientid:b.GOOGLE_ID,cookiepolicy:"single_host_origin",callback:"googleSigninCallback",requestvisibleactions:"http://schemas.google.com/AddActivity","data-cookiepolicy":"single_host_origin",scope:"https://www.googleapis.com/auth/plus.login https://www.googleapis.com/auth/plus.profile.emails.read"})},a.googleSigninCallback=function(a){a&&a.access_token?c.$broadcast("event:google-plus-sign-success",a):c.$broadcast("event:google-plus-sign-failure",a)},function(){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src="https://apis.google.com/js/client:plusone.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}()}]}}]),angular.module("steps",["setupstudent","intro"]),angular.module("setupstudent",["resources.grades","resources.students"]).config(["$routeProvider","ACCESS_LEVEL",function(a,b){a.when("/setup_student",{templateUrl:"views/setupstudent.html",controller:SetupStudentCtrl,controllerAs:"setupStudent",accessLevel:b.pub.registered,resolve:SetupStudentCtrl.resolve})}]);var SetupStudentCtrl=function(a,b,c,d,e,f,g){this.location=a,this.security=b,this.validation=d,this.notification=e,this.grades=c,this.studentsFactory=f,this.$q=g,this.students=[],this.defStudent={rb:1,firstName:"",lastName:"",birthday:"",grade:"",email:"",username:"",password:"",retypePassword:"",gender:""},this.activeStudent=1,this.countStudents=1,this.gender=[{desc:"female",name:"Female"},{desc:"male",name:"Male"}],this.students.push(this.defStudent)};SetupStudentCtrl.prototype.addStudent=function(){this.countStudents++,this.students.push({rb:this.countStudents,firstName:"",lastName:"",birthday:"",grade:"",email:"",username:"",password:"",retypePassword:"",gender:""})},SetupStudentCtrl.prototype.removeStudent=function(){this.countStudents--,this.students.splice(this.students.length-1,1)},SetupStudentCtrl.prototype.setActiveStudent=function(a){this.activeStudent=a+1},SetupStudentCtrl.prototype.saveStudents=function(){var a=this.students.length,b=0,c=this;for(b;a>b;b++)if(this.validation.run(this.students[b])===!1)return void this.notification.showMessage(this.validation.getErrors(),"Student "+(b+1),"error");this.studentsFactory.save(this.students).$promise.then(function(){c.location.path("/intro")})},SetupStudentCtrl.prototype.goToHome=function(){this.location.path("/intro")},SetupStudentCtrl.resolve={grades:["GradesFactory",function(a){return a.query()}]},SetupStudentCtrl.$inject=["$location","Security","grades","SetupStudentValidation","NotificationService","StudentsFactory","$q"],angular.module("setupstudent").controller("SetupStudentCtrl",SetupStudentCtrl);var SetupStudentValidation=function(a){var b=[];b.push({name:"firstName",display:"First name",rules:"required|min_length[3]"}),b.push({name:"lastName",display:"Last name",rules:"required|min_length[3]"}),b.push({name:"username",display:"Username",rules:"required|min_length[6]"}),b.push({name:"password",display:"Password",rules:"required|min_length[6]"}),b.push({name:"retypePassword",display:"Retype password",rules:"required|min_length[6]|matches[password]"}),b.push({name:"grade",display:"Grade",rules:"required"}),b.push({name:"gender",display:"Gender",rules:"required"}),b.push({name:"birthday",display:"Birthday",rules:"required"});var c=new a(b);this.run=function(a){return c.run(a)},this.getErrors=function(){return c.getErrors()}};SetupStudentValidation.$inject=["BaseValidation","$q","$http","ENV"],angular.module("setupstudent").service("SetupStudentValidation",SetupStudentValidation),angular.module("setupstudent").animation(".studentForm",function(){var a=function(a,b){a.animate({opacity:0,display:"hidden"},b)},b=function(a,b){a.animate({opacity:1,display:"block"},b)};return{beforeAddClass:a,removeClass:b}}),angular.module("intro",["resources.account"]).config(["$routeProvider","ACCESS_LEVEL",function(a,b){a.when("/intro",{templateUrl:"views/intro.html",controller:IntroCtrl,controllerAs:"intro",accessLevel:b.registered})}]);var IntroCtrl=function(a,b,c){this.location=a,this.security=b,this.AccountFactory=c};IntroCtrl.prototype.ready=function(){this.security.setRole(3),this.AccountFactory.update_intro(),this.location.path("/home")},IntroCtrl.$inject=["$location","Security","AccountFactory"],angular.module("intro").controller("IntroCtrl",IntroCtrl),angular.module("accountRecovery",["accountRecoveryPassword","accountRecoveryUsername"]),angular.module("accountRecoveryPassword",[]).config(["$routeProvider","ACCESS_LEVEL",function(a,b){a.when("/password_recovery",{templateUrl:"views/signup/password_recovery.html",controller:ForgotPasswordCtrl,controllerAs:"forgotPwd",accessLevel:b.pub})}]);var ForgotPasswordCtrl=function(){};ForgotPasswordCtrl.$inject=[],angular.module("accountRecoveryPassword").controller("ForgotPasswordCtrl",ForgotPasswordCtrl),angular.module("accountRecoveryUsername",[]).config(["$routeProvider","ACCESS_LEVEL",function(a,b){a.when("/username_recovery",{templateUrl:"views/signup/username_recovery.html",controllerUrl:ForgotUsernameCtrl,controllerAs:"forgotUsername",accessLevel:b.pub})}]);var ForgotUsernameCtrl=function(){};ForgotUsernameCtrl.$inject=[],angular.module("accountRecoveryUsername").controller("ForgotUsernameCtrl",ForgotUsernameCtrl),angular.module("navigation",{}).directive("mainNavigation",[function(){return{templateUrl:"views/navigation.html",restrict:"E",replace:!0,compile:function(){$(window).resize(function(){$(window).height()<760?$(".navigation").addClass("small-navigation"):$(".navigation").removeClass("small-navigation")})},controller:function(){$(window).height()<760?$(".navigation").addClass("small-navigation"):$(".navigation").removeClass("small-navigation")}}}]);var NavigationCtrl=function(){};NavigationCtrl.$inject=["$rootScope","Security","$window"],angular.module("navigation").controller("NavigationCtrl",NavigationCtrl),angular.module("navigation").animation(".navigation",function(){var a=function(){},b=function(){};return{beforeAddClass:a,removeClass:b}}),angular.module("header",[]).directive("headerNavigation",["Security",function(){return{templateUrl:"views/header.html",restrict:"E",replace:!0,controller:HeaderCtrl,link:function(){}}}]);var HeaderCtrl=function(a,b){a.showHeader=b.isAuthenticated,a.$watch(function(){return b.currentUser},function(b){a.currentUser=b})};HeaderCtrl.$inject=["$scope","Security"],angular.module("header").controller("HeaderCtrl",HeaderCtrl),angular.module("header").animation(".showHeader",function(){var a=function(a,b){a.animate({top:0},b)},b=function(a,b){a.animate({top:"-60px"},b)};return{enter:a,leave:b}}),angular.module("security",["security.service","security.interceptor"]),angular.module("security.service",["security.interceptor"]);var Security=function(a,b,c,d,e){var f={},g=function(b){(!b.role||b.role<0)&&(b.role=e.pub),f.currentUser=b,d.put("ccompparent",f.currentUser),a.defaults.headers.common["X-API-KEY"]=b.token},h=function(){var b=d.get("ccompparent");return angular.isDefined(b)&&(a.defaults.headers.common["X-API-KEY"]=b.token),b};return f.currentUser=h(),f.login=function(b){var d=a.post(c.url+"/login",b),h={valid:null,intro:null};return d.then(function(a){var b=null;switch(a.data.intro){case 0:b=e.registered;break;case 1:b=e.auth;break;default:b=e.pub}return g({token:a.data.data,role:b,email:a.data.email}),h.valid=f.isAuthenticated(),h.intro=b,h},function(){return f.isAuthenticated()})},f.loginFacebook=function(b){var d=a.post(c.url+"/facebook_login",b);return d.then(function(a){return"new"===a.data.user?(g({token:a.data.data,role:e.registered,email:a.data.email}),{type:a.data.user,loggedIn:f.isRegistered()}):(g({token:a.data.data,role:e.auth,email:a.data.email}),{type:a.data.user,loggedIn:f.isAuthenticated()})},function(){return f.isAuthenticated()})},f.loginGoogle=function(b){var d=a.post(c.url+"/google_login",b);return d.then(function(a){return"new"===a.data.user?(g({token:a.data.data,role:e.registered,email:a.data.email}),{type:a.data.user,loggedIn:f.isRegistered()}):(g({token:a.data.data,role:e.auth,email:a.data.email}),{type:a.data.user,loggedIn:f.isAuthenticated()})},function(){return f.isAuthenticated()})},f.register=function(b){var d=a.post(c.url+"/registration",b);return d.then(function(a){return g({token:a.data.data,role:e.registered,email:a.data.email}),f.isRegistered()},function(){return f.isRegistered()})},f.logout=function(){f.currentUser=null,g({role:e.pub,token:null})},f.requestCurrentUser=function(){return f.isAuthenticated()?b.when(f.currentUser):(g({role:e.pub}),a.get(c.url+"/current-user").then(function(){}))},f.isAuthenticated=function(){if(angular.isUndefined(f.currentUser)||null===f.currentUser)return!1;switch(f.currentUser.role){case e.auth:return!0;default:return!1}},f.isRegistered=function(){if(angular.isUndefined(f.currentUser)||null===f.currentUser)return!1;switch(f.currentUser.role){case e.registered:return!0;default:return!1}},f.setRole=function(a){f.currentUser.role=a,g(f.currentUser)},f.getEmail=function(){return f.currentUser.email},f};Security.$inject=["$http","$q","ENV","$cookieStore","ACCESS_LEVEL"],angular.module("security.service").factory("Security",Security),angular.module("security.interceptor",[]).factory("Interceptor",["$q","$location",function(a,b){var c={request:function(a){return a},response:function(a){return a},requestError:function(a){return a},responseError:function(c){return 401===c.status&&b.path("/signup"),a.reject(c)}};return c}]).config(["$httpProvider",function(a){a.interceptors.push("Interceptor")}]),angular.module("home",["resources.statistic","resources.statistic.list"]).config(["$routeProvider","ACCESS_LEVEL",function(a,b){a.when("/home",{templateUrl:"views/home.html",controller:HomeCtrl,controllerAs:"home",resolve:HomeCtrl.resolve,accessLevel:b.auth})}]);var HomeCtrl=function(a,b,c,d){$(window).width()<1024?d.showMainNav():d.menu(1),this.imageUrl=b.url,this.globalStatistic=a,this.statisticList=c,this.detailsStat=null,this.showDetailsIndex=null};HomeCtrl.prototype.getDetails=function(a,b){var c=this;return this.showDetailsIndex===b?void(this.showDetailsIndex=null):void this.statisticList.get({id:a.studentId}).$promise.then(function(a){c.detailsStat=a.response,c.showDetailsIndex=b})},HomeCtrl.resolve={globalStatistic:["$q","StatisticFactory",function(a,b){var c=a.defer();return b.query().$promise.then(function(a){c.resolve(a)}),c.promise}]},HomeCtrl.$inject=["globalStatistic","IMG","StatisticListFactory","NavigationService"],angular.module("home").controller("HomeCtrl",HomeCtrl),angular.module("home").animation(".show-details-animation",function(){var a=function(a,b){a.css("display","none").stop().slideDown(500,b)},b=function(a,b){a.stop().slideUp(500,b)};return{enter:a,leave:b}}),angular.module("classcode",[]).config(["$routeProvider","ACCESS_LEVEL",function(a,b){a.when("/classcode",{templateUrl:"views/classcode.html",controller:ClassCodeCtrl,controllerAs:"classCode",resolve:ClassCodeCtrl.resolve,accessLevel:b.auth})}]);var ClassCodeCtrl=function(a,b,c){$(window).width()<1024?a.showMainNav():a.menu(1),this.$modal=c,this.saveCustomer=function(){}};ClassCodeCtrl.prototype.buy=function(a){this.hendler.open({name:"Demo Site",description:"2 widgets ($20.00)",amount:2e3}),a.preventDefault()},ClassCodeCtrl.prototype.openHelpModal=function(){{var a=this;a.$modal.open({templateUrl:"views/classcodeDetailModal.html",controller:"classcodeDetailModalCtrl as c_classcodeDetail",backdrop:"static",size:"lg"})}},ClassCodeCtrl.resolve={},ClassCodeCtrl.$inject=["NavigationService","ENV","$modal"],angular.module("classcode").controller("ClassCodeCtrl",ClassCodeCtrl);var classcodeDetailModalCtrl=function(a){this.cancel=function(){a.dismiss()}};classcodeDetailModalCtrl.$inject=["$modalInstance"],angular.module("classcode").controller("classcodeDetailModalCtrl",classcodeDetailModalCtrl),angular.module("students",["resources.students","resources.grades","resources.parent-students"]).config(["$routeProvider","ACCESS_LEVEL",function(a,b){a.when("/students",{templateUrl:"views/student.html",controller:StudentCtrl,controllerAs:"c_student",resolve:StudentCtrl.resolve,accessLevel:b.auth})}]);var StudentCtrl=function(a,b,c,d,e,f,g,h,i){$(window).width()<1024?i.showMainNav():i.menu(1),this.imageUrl=e.url,this.studentsFactory=f,this.notification=d,this.students=a,this.grades=b,this.validation=c,this.studentConnectionValidation=g,this.parentStudentFactory=h,this.defStudent={firstName:"",lastName:"",birthday:"",grade:"",email:"",username:"",password:"",retypePassword:"",gender:""},this.defStudentConnection={username:"",password:""},this.newStudent=null,this.newStudentConnection=null,this.gender=[{id:1,desc:"female",name:"Female"},{id:2,desc:"male",name:"Male"}],this.addStudentForm=!1,this.addConnectionStudentForm=!1,this.showAddStudentForm=!1};StudentCtrl.prototype.editStudent=function(a){var b=this;return this.validation.run(a)===!1?void this.notification.showMessage(this.validation.getErrors(),"Edit student","error"):void a.$edit({id:a.studentId}).then(function(){b.notification.success("Student data was successfully updated","")})},StudentCtrl.prototype.addStudent=function(){var a=this;return this.validation.run(this.newStudent)===!1?void this.notification.showMessage(this.validation.getErrors(),"Add student","error"):void this.studentsFactory.saveSingle(this.newStudent).$promise.then(function(b){a.students.push(b),a.showAddStudentForm=!1,a.newStudent=angular.copy(a.defStudent),a.notification.success("New student successfully added!")})},StudentCtrl.prototype.showStudentForm=function(a){"addNew"===a?(this.addStudentForm=!0,this.newStudent=angular.copy(this.defStudent)):(this.addConnectionStudentForm=!0,this.newStudentConnection=angular.copy(this.defStudentConnection))},StudentCtrl.prototype.hideStudentForm=function(a){"addNew"===a?(this.addStudentForm=!1,this.newStudent=null):(this.addConnectionStudentForm=!1,this.newStudentConnection=null)},StudentCtrl.prototype.addStudentConnection=function(){var a=this;return this.studentConnectionValidation.run(this.newStudentConnection)===!1?void this.notification.showMessage(this.studentConnectionValidation.getErrors(),"Add Student connection","error"):void this.studentsFactory.saveConnection(this.newStudentConnection).$promise.then(function(b){a.students.push(b),a.addConnectionStudentForm=!1,a.newStudentConnection=angular.copy(a.defStudentConnection),a.notification.success("New student successfully added!")})},StudentCtrl.resolve={students:["$q","StudentsFactory",function(a,b){var c=a.defer();return b.query().$promise.then(function(a){return c.resolve(a)}),c.promise}],grades:["GradesFactory",function(a){return a.query()}]},StudentCtrl.$inject=["students","grades","StudentValidation","NotificationService","IMG","StudentsFactory","StudentConnectionValidation","ParentStudentsFactory","NavigationService"],angular.module("students").controller("StudentCtrl",StudentCtrl);var StudentValidation=function(a){var b=[];b.push({name:"firstName",display:"First name",rules:"required|min_length[3]"}),b.push({name:"lastName",display:"Last name",rules:"required|min_length[3]"}),b.push({name:"username",display:"Username",rules:"required|min_length[6]"}),b.push({name:"grade",display:"Grade",rules:"required"}),b.push({name:"birthday",display:"Birthday",rules:"required|valid_date"});var c=null;this.run=function(d){if(angular.isDefined(d.password)||angular.isDefined(d.retypePassword))b.push({name:"password",display:"Password",rules:"required|min_length[6]"}),b.push({name:"retypePassword",display:"Retype password",rules:"required|min_length[6]|matches[password]"});else for(var e=0;e<b.length;e++)"password"===b[e].name&&b.splice(e,1),"retypePassword"===b[e].name&&b.splice(e,1);return c=new a(b),c.run(d)},this.getErrors=function(){return c.getErrors()},a.prototype._hooks.valid_date=function(a){var b=new Date(a.value);return isNaN(b.getTime())?!1:!0}};StudentValidation.$inject=["BaseValidation","$http","ENV","$q"],angular.module("students").service("StudentValidation",StudentValidation);var StudentConnectionValidation=function(a){var b=[];b.push({name:"username",display:"Username",rules:"required|min_length[6]"}),b.push({name:"password",display:"Password",rules:"required|min_length[3]"});var c=null;this.run=function(d){return c=new a(b),c.run(d)},this.getErrors=function(){return c.getErrors()}};StudentConnectionValidation.$inject=["BaseValidation"],angular.module("students").service("StudentConnectionValidation",StudentConnectionValidation),angular.module("support",["resources.support"]).config(["$routeProvider","ACCESS_LEVEL",function(a,b){a.when("/support",{templateUrl:"views/support.html",controller:SupportCtrl,controllerAs:"c_support",resolve:SupportCtrl.resolve,accessLevel:b.auth})}]);var SupportCtrl=function(a,b,c,d){$(window).width()<1024?a.showMainNav():a.menu(1),this.comment={name:"",email:"",comment:""},this.SupportFactory=d,this.SupportCommentValidation=b,this.NotificationService=c};SupportCtrl.prototype.sendComment=function(){var a=this;return this.SupportCommentValidation.run(this.comment)===!1?void this.NotificationService.showMessage(this.SupportCommentValidation.getErrors(),"Comment form","error"):void this.SupportFactory.save(this.comment).$promise.then(function(){a.NotificationService.success("Email successfully send!")})},SupportCtrl.resolve={},SupportCtrl.$inject=["NavigationService","SupportCommentValidation","NotificationService","SupportFactory"],angular.module("support").controller("SupportCtrl",SupportCtrl);var SupportCommentValidation=function(a){var b=[];b.push({name:"name",display:"Name",rules:"required"}),b.push({name:"email",display:"Email",rules:"required|valid_email"}),b.push({name:"comment",display:"Comment",rules:"required"});var c=new a(b);this.run=function(a){return c.run(a)},this.getErrors=function(){return c.getErrors()}};SupportCommentValidation.$inject=["BaseValidation"],angular.module("support").service("SupportCommentValidation",SupportCommentValidation),angular.module("account",["resources.account"]).config(["$routeProvider","ACCESS_LEVEL",function(a,b){a.when("/account",{templateUrl:"views/account.html",controller:AccountCtrl,controllerAs:"account",resolve:AccountCtrl.resolve,accessLevel:b.auth})}]);var AccountCtrl=function(a,b,c,d,e,f){$(window).width()<1024?e.showMainNav():e.menu(1),this.notification=c,this.accountValidation=b,this.accountFactory=d,this.user=a,this.countries=f};AccountCtrl.resolve={accountData:["$q","AccountFactory",function(a,b){var c=a.defer();return b.get().$promise.then(function(a){c.resolve(a)}),c.promise}],countries:["$q","CountryFactory",function(a,b){var c=a.defer();return b.query().$promise.then(function(a){c.resolve(a)}),c.promise}]},AccountCtrl.prototype.save=function(){var a=this;return this.accountValidation.run(this.user)===!1?void this.notification.showMessage(this.accountValidation.getErrors(),"Account form","error"):void this.accountFactory.edit(this.user).$promise.then(function(b){a.notification.success(b.message,"Account data")})},AccountCtrl.$inject=["accountData","AccountValidation","NotificationService","AccountFactory","NavigationService","countries"],angular.module("account").controller("AccountCtrl",AccountCtrl);var AccountValidation=function(a){var b=[],c=null;b.push({name:"firstName",display:"First name",rules:"required|min_length[3]"}),b.push({name:"lastName",display:"Last name",rules:"required|min_length[3]"}),b.push({name:"email",display:"Email",rules:"required|valid_email"}),this.run=function(d){return(angular.isDefined(d.password)||angular.isDefined(d.retypePassword))&&(b.push({name:"password",display:"Password",rules:"required|min_length[6]"}),b.push({name:"retypePassword",display:"Retype password",rules:"required|matches[password]|min_length[6]"}),angular.isUndefined(d.password)&&(d.password=""),angular.isUndefined(d.retypePassword)&&(d.retypePassword="")),c=new a(b),c.run(d)},this.getErrors=function(){return c.getErrors()}};AccountValidation.$inject=["BaseValidation"],angular.module("account").service("AccountValidation",AccountValidation),angular.module("shop",["resources.classes","checkout","resources.class_connection"]).config(["$routeProvider","ACCESS_LEVEL",function(a,b){a.when("/shop",{templateUrl:"views/shop/shop.html",controller:ShopCtrl,controllerAs:"c_shop",resolve:ShopCtrl.resolve,accessLevel:b.auth})}]);var ShopCtrl=function(a,b,c,d,e,f,g){$(window).width()<1024?a.showMainNav():a.menu(1),this.$location=g,this.classes=c,this.$modal=f,this.selectedClass=null,this.students=null,this.UnusedStudentsFactory=d,this.cart=e};ShopCtrl.prototype.openShopModal=function(a){var b=this;this.selectedClass=a;var c=b.$modal.open({templateUrl:"views/shop/modal.html",controller:ShopModalCtrl,size:"lg",backdrop:"static",resolve:{students:function(){return b.UnusedStudentsFactory.query({classId:a.classId})},selectedClass:function(){return angular.copy(a)},cart:function(){var c,d=b.cart.items.length,e=b.cart.items;for(c=0;d>c;c++)if(e[c].classId===a.classId)return e[c];return null}}});c.result.then(function(a){a.cartItem.student.length>0&&b.cart.addItem(a.cartItem),a.checkout&&b.$location.path("/checkout")},function(){})},ShopCtrl.prototype.openDetailModal=function(a){var b=this;this.selectedClass=a;var c=b.$modal.open({templateUrl:"views/shop/detailModal.html",controller:"ShopDetailModalCtrl as c_shopDetail",size:"lg",resolve:{description:function(){return a.details.description},title:function(){return a.name},price:function(){return a.price}}});c.result.then(function(){b.openShopModal(a)},function(){})},ShopCtrl.prototype.openConnectionModal=function(a){var b=this,c=b.$modal.open({templateUrl:"views/shop/connectionModal.html",controller:ConnectionModalCtrl,size:"lg",backdrop:"static",resolve:{students:function(){return b.UnusedStudentsFactory.query({classId:a.classId})},selectedClass:function(){return angular.copy(a)}}});c.result.then(function(b){a.quantity-=b.length},function(){}),this.selectedClass=a},ShopCtrl.resolve={classes:["$q","ClassesFactory",function(a,b){var c=a.defer();return b.query().$promise.then(function(a){c.resolve(a)}),c.promise}]},ShopCtrl.$inject=["NavigationService","ENV","classes","UnusedStudentsFactory","ShoppingCart","$modal","$location"],angular.module("shop").controller("ShopCtrl",ShopCtrl);var ShoppingCart=function(){this.items=[],this.loadItems()};ShoppingCart.prototype.loadItems=function(){},ShoppingCart.prototype.addItem=function(a){for(var b=0;b<this.items.length;b++)if(this.items[b].classId===a.classId)return;this.items.push(a)},ShoppingCart.prototype.getTotalQuantity=function(){var a,b=this.items.length,c=0;for(a=0;b>a;a++){var d=this.items[a];c+=d.quantity}return c},ShoppingCart.prototype.getTotalItemPrice=function(a){return parseFloat(a.price*a.quantity).toFixed(2)},ShoppingCart.prototype.getTotalCardPrice=function(){var a,b=this.items.length,c=0;for(a=0;b>a;a++){var d=this.items[a];c+=Math.round(d.price*d.quantity*100)/100}return c},ShoppingCart.prototype.clearCart=function(){this.items=[]},angular.module("ccompparentApp").service("ShoppingCart",ShoppingCart);var ShoppingCartItem=function(){return ShoppingCartItem.add=function(a,b,c,d){this.classId=a,this.className=b,this.quantity=c,this.price=Math.round(100*d)/100,this.student=[]},ShoppingCartItem};angular.module("ccompparentApp").factory("ShoppingCartItem",ShoppingCartItem);var ShopModalCtrl=function(a,b,c,d,e,f){a.students=c,a.class=d,a.cart=null!=e?e:new f.add(d.classId,d.name,0,d.price),a.$watch("cart.student",function(){a.cart.quantity=a.cart.student.length}),a.backToShop=function(){b.close({cartItem:a.cart,checkout:!1})},a.gotToCheckout=function(){b.close({cartItem:a.cart,checkout:!0})},a.cancel=function(){b.dismiss()}};ShopModalCtrl.$inject=["$scope","$modalInstance","students","selectedClass","cart","ShoppingCartItem"],angular.module("shop").controller("ShopModalCtrl",ShopModalCtrl);var ConnectionModalCtrl=function(a,b,c,d,e,f){a.students=c,a.class=d,a.selectedStudents={},a.assign=function(){var c={students:a.selectedStudents.list,"class":a.class.classId};e.save(c).$promise.then(function(c){f.showMessage(null,c.message,"success"),b.close(a.selectedStudents.list)})},a.cancel=function(){b.dismiss()}};ConnectionModalCtrl.$inject=["$scope","$modalInstance","students","selectedClass","ClassConnectionFactory","NotificationService"],angular.module("shop").controller("ConnectionModalCtrl",ConnectionModalCtrl);var ShopDetailModalCtrl=function(a,b,c,d){this.title=c,this.description=b,this.price=d,this.cancel=function(){a.dismiss()},this.selectStudent=function(){a.close()}};ShopDetailModalCtrl.$inject=["$modalInstance","description","title","price"],angular.module("shop").controller("ShopDetailModalCtrl",ShopDetailModalCtrl),angular.module("checkout",["resources.checkout"]).config(["$routeProvider","ACCESS_LEVEL",function(a,b){a.when("/checkout",{templateUrl:"views/shop/checkout.html",controller:CheckoutCtrl,controllerAs:"c_checkout",accessLevel:b.auth,resolve:CheckoutCtrl.resolve})
}]);var CheckoutCtrl=function(a,b,c,d,e,f,g,h,i){$(window).width()<1024?a.showMainNav():a.menu(1);var j=this;this.students=i,this.cart=d,this.totalPrice=d.getTotalCardPrice(),this.$location=c,0===this.cart.items.length&&c.path("/shop"),this.hendler=StripeCheckout.configure({name:"Class Compete",allowRememberMe:!1,zipCode:!0,key:b.key,image:"images/logo128.png",currency:"USD",email:f.getEmail(),token:function(a,b){console.log(a),console.log(b),g.save({token:a,args:b,cart:j.cart.items}).$promise.then(function(a){h.showMessage(a,"Success payment","success"),j.cart.clearCart(),c.path("/shop")})}})};CheckoutCtrl.prototype.getStudent=function(a){for(var b=0;b<this.students.length;b++)if(parseInt(a)===this.students[b].studentId)return this.students[b].firstName+" "+this.students[b].lastName},CheckoutCtrl.prototype.removeStudent=function(a,b){a.student.slice(a.student.indexOf(b),1);for(var c=a.student.length-1;c>=0;c--)a.student[c]==b&&(a.student.splice(c,1),a.quantity--);0===a.quantity&&this.cart.items.splice(this.cart.items.indexOf(a),1),this.totalPrice=this.cart.getTotalCardPrice(),0===this.cart.items.length&&this.$location.path("/shop")},CheckoutCtrl.prototype.buy=function(a){var b=this;this.hendler.open({description:b.cart.getTotalQuantity()+" classes",amount:Math.round(100*b.cart.getTotalCardPrice())}),a.preventDefault()},CheckoutCtrl.resolve={students:["$q","StudentsFactory",function(a,b){var c=a.defer();return b.query().$promise.then(function(a){c.resolve(a)}),c.promise}]},CheckoutCtrl.$inject=["NavigationService","STRIPE","$location","ShoppingCart","ShoppingCartItem","Security","CheckoutFactory","NotificationService","students"],angular.module("checkout").controller("CheckoutCtrl",CheckoutCtrl),angular.module("validation",{}),angular.module("validation").factory("BaseValidation",function(){var a={messages:{required:"The %s field is required.",matches:"The %s field does not match the %s field.","default":"The %s field is still set to default, please change.",valid_email:"The %s field must contain a valid email address.",valid_emails:"The %s field must contain all valid email addresses.",min_length:"The %s field must be at least %s characters in length.",max_length:"The %s field must not exceed %s characters in length.",exact_length:"The %s field must be exactly %s characters in length.",greater_than:"The %s field must contain a number greater than %s.",less_than:"The %s field must contain a number less than %s.",alpha:"The %s field must only contain alphabetical characters.",alpha_numeric:"The %s field must only contain alpha-numeric characters.",alpha_dash:"The %s field must only contain alpha-numeric characters, underscores, and dashes.",numeric:"The %s field must contain only numbers.",integer:"The %s field must contain an integer.",decimal:"The %s field must contain a decimal number.",is_natural:"The %s field must contain only positive numbers.",is_natural_no_zero:"The %s field must contain a number greater than zero.",valid_ip:"The %s field must contain a valid IP.",valid_base64:"The %s field must contain a base64 string.",valid_credit_card:"The %s field must contain a valid credit card number.",is_file_type:"The %s field must contain only %s files.",valid_url:"The %s field must contain a valid URL.",valid_date:"The %s filed must contain a valid date.",unique_username:"The %s is already taken."},callback:function(){}},b=/^(.+?)\[(.+)\]$/,c=/^[0-9]+$/,d=/^\-?[0-9]+$/,e=/^\-?[0-9]*\.?[0-9]+$/,f=/^[a-zA-Z0-9.!#$%&amp;'*+\-\/=?\^_`{|}~\-]+@[a-zA-Z0-9\-]+(?:\.[a-zA-Z0-9\-]+)*$/,g=/^[a-z]+$/i,h=/^[a-z0-9]+$/i,i=/^[a-z0-9_\-]+$/i,j=/^[0-9]+$/i,k=/^[1-9][0-9]*$/i,l=/^((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){3}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})$/i,m=/[^a-zA-Z0-9\/\+=]/i,n=/^[\d\-\s]+$/,o=/^((http|https):\/\/(\w+:{0,1}\w*@)?(\S+)|)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,p=function(a){this.errors=[],this.fields={},this.messages={},this.handlers={};for(var b=a.length,c=0;b>c;c++){var d=a[c];if((d.name||d.names)&&d.rules)if(d.names)for(var e=0;e<d.names.length;e++)this._addField(d,d.names[e]);else this._addField(d,d.name)}};return p.prototype.setMessage=function(a,b){return this.messages[a]=b,this},p.prototype.registerCallback=function(a,b){return a&&"string"==typeof a&&b&&"function"==typeof b&&(this.handlers[a]=b),this},p.prototype._addField=function(a,b){this.fields[b]={name:b,display:a.display||b,rules:a.rules,id:null,type:null,value:null,checked:null}},p.prototype.run=function(a){this.validateObj=a,this.errors=[];var b=null,c=null;for(var d in this.fields)this.fields.hasOwnProperty(d)&&(b=null,c=null,b=this.fields[d]||{},b.value=this.validateObj[d],this._validateField(b));return this.errors.length>0?!1:!0},p.prototype.getErrors=function(){return this.errors},p.prototype._validateField=function(c){for(var d=c.rules.split("|"),e=c.rules.indexOf("required"),f=!c.value||""===c.value||void 0===c.value,g=0,h=d.length;h>g;g++){var i=d[g],j=null,k=!1,l=b.exec(i);if((-1!==e||-1!==i.indexOf("!callback_")||!f)&&(l&&(i=l[1],j=l[2]),"!"===i.charAt(0)&&(i=i.substring(1,i.length)),"function"==typeof this._hooks[i]?this._hooks[i].apply(this,[c,j])||(k=!0):"callback_"===i.substring(0,9)&&(i=i.substring(9,i.length),"function"==typeof this.handlers[i]&&this.handlers[i].apply(this,[c.value,j])===!1&&(k=!0)),k)){var m=this.messages[i]||a.messages[i],n="An error has occurred with the "+c.display+" field.";m&&(n=m.replace("%s",c.display),j&&(n=n.replace("%s",this.fields[j]?this.fields[j].display:j))),this.errors.push({name:c.name,message:n,rule:i});break}}},p.prototype._hooks={required:function(a){var b=a.value;return"checkbox"===a.type||"radio"===a.type?a.checked===!0:null!==b&&""!==b},"default":function(a,b){return a.value!==b},matches:function(a,b){this.validateObj[b];return this.validateObj.hasOwnProperty(b)?a.value===this.validateObj[b]:!1},valid_email:function(a){return f.test(a.value)},valid_emails:function(a){for(var b=a.value.split(","),c=0;c<b.length;c++)if(!f.test(b[c]))return!1;return!0},min_length:function(a,b){return c.test(b)?a.value.length>=parseInt(b,10):!1},max_length:function(a,b){return c.test(b)?a.value.length<=parseInt(b,10):!1},exact_length:function(a,b){return c.test(b)?a.value.length===parseInt(b,10):!1},greater_than:function(a,b){return e.test(a.value)?parseFloat(a.value)>parseFloat(b):!1},less_than:function(a,b){return e.test(a.value)?parseFloat(a.value)<parseFloat(b):!1},alpha:function(a){return g.test(a.value)},alpha_numeric:function(a){return h.test(a.value)},alpha_dash:function(a){return i.test(a.value)},numeric:function(a){return c.test(a.value)},integer:function(a){return d.test(a.value)},decimal:function(a){return e.test(a.value)},is_natural:function(a){return j.test(a.value)},is_natural_no_zero:function(a){return k.test(a.value)},valid_ip:function(a){return l.test(a.value)},valid_base64:function(a){return m.test(a.value)},valid_url:function(a){return o.test(a.value)},valid_credit_card:function(a){if(!n.test(a.value))return!1;for(var b=0,c=0,d=!1,e=a.value.replace(/\D/g,""),f=e.length-1;f>=0;f--){var g=e.charAt(f);c=parseInt(g,10),d&&(c*=2)>9&&(c-=9),b+=c,d=!d}return b%10===0},is_file_type:function(a,b){if("file"!==a.type)return!0;var c=a.value.substr(a.value.lastIndexOf(".")+1),d=b.split(","),e=!1,f=0,g=d.length;for(f;g>f;f++)c==d[f]&&(e=!0);return e}},p});var NotificationService=function(){toastr.options={closeButton:!1,debug:!1,positionClass:"toast-top-right",onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"slideDown",hideMethod:"slideUp"};var a=null;this.error=function(b,c){this.clearLast(),a=toastr.error(b,c||"")},this.success=function(a,b){this.clearLast(),toastr.success(a,b||"")},this.info=function(a,b){this.clearLast(),toastr.info(a,b||"")},this.warning=function(a,b){toastr.warning(a,b||"")},this.clear=function(){toastr.clear()},this.clearLast=function(){toastr.clear(a)},this.showMessage=function(a,b,c){var d="";if(angular.isArray(a)){var e=0,f=a.length;for(e;f>e;e++)d+=a[e].message+"</br>"}else if(angular.isObject(a))for(var g in a)d+=a[g]+"</br>";else d=a;"function"==typeof this[c]&&this[c](d,b)}};NotificationService.$inject=[],angular.module("ccompparentApp").service("NotificationService",NotificationService),angular.module("ngProgressInterceptor",["ngProgress"]).config(["$httpProvider",function(a){a.responseInterceptors.push("HttpProgressInterceptor")}]).provider("HttpProgressInterceptor",function(){this.$get=["$injector","$q",function(a,b){var c,d=this;return this.getNgProgress=function(){return c=c||a.get("ngProgress")},function(a){return c=d.getNgProgress(),c.reset(),c.start(),a.then(function(a){return c.complete(),a},function(a){return c.complete(),b.reject(a)})}}]}),angular.module("httpInterceptor",[]).factory("Interceptor",["$q","$location","$rootScope","NotificationService",function(a,b,c,d){var e={request:function(a){return a},response:function(a){return d.clear(),a},requestError:function(a){return a},responseError:function(c){return 401===c.status?b.path("/signup"):400===c.status&&d.showMessage(c.data,"","error"),a.reject(c)}};return e}]),angular.module("directives",[]),angular.module("directives").directive("datepicker",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){var e=function(b){a.$apply(function(){d.$setViewValue(b)})},f={dateFormat:"mm/dd/yy",changeMonth:!0,changeYear:!0,yearRange:"1980:-0",onSelect:function(a){e(a)}};b.datepicker(f)}}}),angular.module("directives").directive("easypiechart",[function(){return{restrict:"A",scope:{percent:"@"},link:function(a,b,c){var d={0:"#636c7b",1:"#7bb55e",2:"#973739"},e={animate:2e3,barColor:d[c.index],trackColor:"#dddddd",scaleColor:!1,size:100,lineWidth:8,lineCap:"round"};$(b).easyPieChart(e),$(b).data("easyPieChart").update(c.percent)}}}]).directive("easypiechararrow",[function(){return{restrict:"A",scope:{percent:"@",color:"@"},link:function(a,b){var c=3.6*parseFloat(a.percent);b.css("background-color",a.color),b.animate({deg:c},{duration:2e3,step:function(a){b.css("transform","rotate("+a+"deg)"),b.css("-webkit-transform","rotate("+a+"deg)"),b.css("-ms-transform","rotate("+a+"deg)")}})}}}]),angular.module("directives").directive("accordion",function(){return{restrict:"A",link:function(a,b){var c={collapsible:!0,heightStyle:"content",active:!1};b.accordion(c)}}}),angular.module("resources.students",["ngResource"]);var Students=function(a,b){var c=a(b.url+"/student",{},{edit:{method:"PUT",url:b.url+"/student/:id",params:{id:"@id"}},save:{method:"POST",url:b.url+"/student/new"},saveSingle:{method:"POST",url:b.url+"/student/single"},saveConnection:{method:"POST",url:b.url+"/student/connection"}});return c.prototype.canEdit=function(){return(new Date).getFullYear()-new Date(this.birthday).getFullYear()<12},c};Students.$inject=["$resource","ENV"],angular.module("resources.students").factory("StudentsFactory",Students);var UnusedStudents=function(a,b){var c=a(b.url+"/free_student",{},{});return c.prototype.getFullName=function(){return this.firstName+" "+this.lastName},c};UnusedStudents.$inject=["$resource","ENV"],angular.module("resources.students").factory("UnusedStudentsFactory",UnusedStudents),angular.module("resources.parent-students",["ngResource"]);var ParentStudents=function(a,b){var c=a(b.url+"/parent_student",{},{});return c};ParentStudents.$inject=["$resource","ENV"],angular.module("resources.parent-students").factory("ParentStudentsFactory",ParentStudents),angular.module("resources.grades",["ngResource"]);var Grades=function(a,b){var c=a(b.url+"/grade");return c};Grades.$inject=["$resource","ENV"],angular.module("resources.grades").factory("GradesFactory",Grades),angular.module("resources.statistic",["ngResource"]);var Statistic=function(a,b){var c=a(b.url+"/statistic",{},{});return c};Statistic.$inject=["$resource","ENV"],angular.module("resources.students").factory("StatisticFactory",Statistic),angular.module("resources.statistic.list",["ngResource"]);var StatisticList=function(a,b){var c=a(b.url+"/statistic/:id",{id:"@id"},{get:{method:"GET",cache:!0}});return c};StatisticList.$inject=["$resource","ENV"],angular.module("resources.statistic.list").factory("StatisticListFactory",StatisticList),angular.module("resources.credentials",["ngResource"]);var Credentials=function(a,b){var c=a(b.url+"/forgot-credentials");return c};Credentials.$inject=["$resource","ENV"],angular.module("resources.grades").factory("CredentialsFactory",Credentials),angular.module("resources.account",["ngResource"]);var Account=function(a,b){var c=a(b.url+"/account",{},{edit:{method:"PUT",url:b.url+"/account"},update_intro:{method:"PUT",url:b.url+"/account/intro"}});return c};Account.$inject=["$resource","ENV"],angular.module("resources.account").factory("AccountFactory",Account),angular.module("resources.support",["ngResource"]);var Support=function(a,b){var c=a(b.url+"/support",{},{edit:{method:"PUT",url:b.url+"/support"}});return c};Support.$inject=["$resource","ENV"],angular.module("resources.support").factory("SupportFactory",Support),angular.module("resources.classes",["ngResource"]);var Classes=function(a,b){var c=a(b.url+"/classes");return c};Classes.$inject=["$resource","ENV"],angular.module("resources.classes").factory("ClassesFactory",Classes),angular.module("resources.checkout",["ngResource"]);var Checkout=function(a,b){var c=a(b.url+"/checkout");return c};Checkout.$inject=["$resource","ENV"],angular.module("resources.checkout").factory("CheckoutFactory",Checkout),angular.module("resources.class_connection",["ngResource"]);var ClassConnection=function(a,b){var c=a(b.url+"/class_student");return c};ClassConnection.$inject=["$resource","ENV"],angular.module("resources.class_connection").factory("ClassConnectionFactory",ClassConnection),function(){var a,b,c,d,e,f,g,h,i,j;a=window.device,window.device={},c=window.document.documentElement,j=window.navigator.userAgent.toLowerCase(),device.ios=function(){return device.iphone()||device.ipod()||device.ipad()},device.iphone=function(){return d("iphone")},device.ipod=function(){return d("ipod")},device.ipad=function(){return d("ipad")},device.android=function(){return d("android")},device.androidPhone=function(){return device.android()&&d("mobile")},device.androidTablet=function(){return device.android()&&!d("mobile")},device.blackberry=function(){return d("blackberry")||d("bb10")||d("rim")},device.blackberryPhone=function(){return device.blackberry()&&!d("tablet")},device.blackberryTablet=function(){return device.blackberry()&&d("tablet")},device.windows=function(){return d("windows")},device.windowsPhone=function(){return device.windows()&&d("phone")},device.windowsTablet=function(){return device.windows()&&d("touch")},device.fxos=function(){return(d("(mobile;")||d("(tablet;"))&&d("; rv:")},device.fxosPhone=function(){return device.fxos()&&d("mobile")},device.fxosTablet=function(){return device.fxos()&&d("tablet")},device.meego=function(){return d("meego")},device.mobile=function(){return device.androidPhone()||device.iphone()||device.ipod()||device.windowsPhone()||device.blackberryPhone()||device.fxosPhone()||device.meego()},device.tablet=function(){return device.ipad()||device.androidTablet()||device.blackberryTablet()||device.windowsTablet()||device.fxosTablet()},device.portrait=function(){return 90!==Math.abs(window.orientation)},device.landscape=function(){return 90===Math.abs(window.orientation)},device.noConflict=function(){return window.device=a,this},d=function(a){return-1!==j.indexOf(a)},f=function(a){var b;return b=new RegExp(a,"i"),c.className.match(b)},b=function(a){return f(a)?void 0:c.className+=" "+a},h=function(a){return f(a)?c.className=c.className.replace(a,""):void 0},device.ios()?device.ipad()?b("ios ipad tablet"):device.iphone()?b("ios iphone mobile"):device.ipod()&&b("ios ipod mobile"):b(device.android()?device.androidTablet()?"android tablet":"android mobile":device.blackberry()?device.blackberryTablet()?"blackberry tablet":"blackberry mobile":device.windows()?device.windowsTablet()?"windows tablet":device.windowsPhone()?"windows mobile":"desktop":device.fxos()?device.fxosTablet()?"fxos tablet":"fxos mobile":device.meego()?"meego mobile":"desktop"),e=function(){return device.landscape()?(h("portrait"),b("landscape")):(h("landscape"),b("portrait"))},i="onorientationchange"in window,g=i?"orientationchange":"resize",window.addEventListener?window.addEventListener(g,e,!1):window.attachEvent?window.attachEvent(g,e):window[g]=e,e()}.call(this),angular.module("resources.country",["ngResource"]);var Country=function(a,b){var c=a(b.url+"/country");return c};Country.$inject=["$resource","ENV"],angular.module("resources.country").factory("CountryFactory",Country);var NavigationService=function(){var a=this;this.open=null,this.menu=function(b){b?(a.open=1,$(".main-nav").animate({left:"0"}),$("body").animate({"padding-left":"170px"}),$(".main-nav ul").animate({left:"0"}),$(".main-nav-trigger").html("Close menu")):(a.open=0,$("body").animate({"padding-left":"0"}),$(".main-nav ul").animate({left:"-170px"}),$(".main-nav-trigger").html("Open menu"))},this.menuLogout=function(){$(".main-nav").animate({left:"-170px"}),$("body").animate({"padding-left":"0"}),$(".main-nav ul").animate({left:"-170px"})},this.showMainNav=function(){$(".main-nav").animate({left:"0"})}};angular.module("navigationService",[]).service("NavigationService",NavigationService),angular.module("ui.bootstrap",["ui.bootstrap.transition","ui.bootstrap.modal"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(a,b,c){function d(a){for(var b in a)if(void 0!==f.style[b])return a[b]}var e=function(d,f,g){g=g||{};var h=a.defer(),i=e[g.animation?"animationEndEventName":"transitionEndEventName"],j=function(){c.$apply(function(){d.unbind(i,j),h.resolve(d)})};return i&&d.bind(i,j),b(function(){angular.isString(f)?d.addClass(f):angular.isFunction(f)?f(d):angular.isObject(f)&&d.css(f),i||h.resolve(d)}),h.promise.cancel=function(){i&&d.unbind(i,j),h.reject("Transition cancelled")},h.promise},f=document.createElement("trans"),g={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},h={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return e.transitionEndEventName=d(g),e.animationEndEventName=d(h),e}]),angular.module("ui.bootstrap.modal",["ui.bootstrap.transition"]).factory("$$stackedMap",function(){return{createNew:function(){var a=[];return{add:function(b,c){a.push({key:b,value:c})},get:function(b){for(var c=0;c<a.length;c++)if(b==a[c].key)return a[c]},keys:function(){for(var b=[],c=0;c<a.length;c++)b.push(a[c].key);return b},top:function(){return a[a.length-1]},remove:function(b){for(var c=-1,d=0;d<a.length;d++)if(b==a[d].key){c=d;break}return a.splice(c,1)[0]},removeTop:function(){return a.splice(a.length-1,1)[0]},length:function(){return a.length}}}}}).directive("modalBackdrop",["$timeout",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",link:function(b){b.animate=!1,a(function(){b.animate=!0})}}}]).directive("modalWindow",["$modalStack","$timeout",function(a,b){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:"template/modal/window.html",link:function(c,d,e){c.windowClass=e.windowClass||"",b(function(){c.animate=!0,d[0].focus()}),c.close=function(b){var c=a.getTop();c&&c.value.backdrop&&"static"!=c.value.backdrop&&b.target===b.currentTarget&&(b.preventDefault(),b.stopPropagation(),a.dismiss(c.key,"backdrop click"))}}}}]).factory("$modalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function(a,b,c,d,e,f){function g(){for(var a=-1,b=n.keys(),c=0;c<b.length;c++)n.get(b[c]).value.backdrop&&(a=c);return a}function h(a){var b=c.find("body").eq(0),d=n.get(a).value;n.remove(a),j(d.modalDomEl,d.modalScope,300,i),b.toggleClass(m,n.length()>0)}function i(){if(k&&-1==g()){var a=l;j(k,l,150,function(){a.$destroy(),a=null}),k=void 0,l=void 0}}function j(c,d,e,f){function g(){g.done||(g.done=!0,c.remove(),f&&f())}d.animate=!1;var h=a.transitionEndEventName;if(h){var i=b(g,e);c.bind(h,function(){b.cancel(i),g(),d.$apply()})}else b(g,0)}var k,l,m="modal-open",n=f.createNew(),o={};return e.$watch(g,function(a){l&&(l.index=a)}),c.bind("keydown",function(a){var b;27===a.which&&(b=n.top(),b&&b.value.keyboard&&e.$apply(function(){o.dismiss(b.key)}))}),o.open=function(a,b){n.add(a,{deferred:b.deferred,modalScope:b.scope,backdrop:b.backdrop,keyboard:b.keyboard});var f=c.find("body").eq(0),h=g();h>=0&&!k&&(l=e.$new(!0),l.index=h,k=d("<div modal-backdrop></div>")(l),f.append(k));var i=angular.element("<div modal-window></div>");i.attr("window-class",b.windowClass),i.attr("index",n.length()-1),i.attr("animate","animate"),i.html(b.content);var j=d(i)(b.scope);n.top().value.modalDomEl=j,f.append(j),f.addClass(m)},o.close=function(a,b){var c=n.get(a).value;c&&(c.deferred.resolve(b),h(a))},o.dismiss=function(a,b){var c=n.get(a).value;c&&(c.deferred.reject(b),h(a))},o.dismissAll=function(a){for(var b=this.getTop();b;)this.dismiss(b.key,a),b=this.getTop()},o.getTop=function(){return n.top()},o}]).provider("$modal",function(){var a={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(b,c,d,e,f,g,h){function i(a){return a.template?d.when(a.template):e.get(a.templateUrl,{cache:f}).then(function(a){return a.data})}function j(a){var c=[];return angular.forEach(a,function(a){(angular.isFunction(a)||angular.isArray(a))&&c.push(d.when(b.invoke(a)))}),c}var k={};return k.open=function(b){var e=d.defer(),f=d.defer(),k={result:e.promise,opened:f.promise,close:function(a){h.close(k,a)},dismiss:function(a){h.dismiss(k,a)}};if(b=angular.extend({},a.options,b),b.resolve=b.resolve||{},!b.template&&!b.templateUrl)throw new Error("One of template or templateUrl options is required.");var l=d.all([i(b)].concat(j(b.resolve)));return l.then(function(a){var d=(b.scope||c).$new();d.$close=k.close,d.$dismiss=k.dismiss;var f,i={},j=1;b.controller&&(i.$scope=d,i.$modalInstance=k,angular.forEach(b.resolve,function(b,c){i[c]=a[j++]}),f=g(b.controller,i)),h.open(k,{scope:d,deferred:e,content:a[0],backdrop:b.backdrop,keyboard:b.keyboard,windowClass:b.windowClass})},function(a){e.reject(a)}),l.then(function(){f.resolve(!0)},function(){f.reject(!1)}),k},k}]};return a}),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.transition","ui.bootstrap.modal"]),angular.module("ui.bootstrap.tpls",["template/modal/backdrop.html","template/modal/window.html"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(a,b,c){function d(a){for(var b in a)if(void 0!==f.style[b])return a[b]}var e=function(d,f,g){g=g||{};var h=a.defer(),i=e[g.animation?"animationEndEventName":"transitionEndEventName"],j=function(){c.$apply(function(){d.unbind(i,j),h.resolve(d)})};return i&&d.bind(i,j),b(function(){angular.isString(f)?d.addClass(f):angular.isFunction(f)?f(d):angular.isObject(f)&&d.css(f),i||h.resolve(d)}),h.promise.cancel=function(){i&&d.unbind(i,j),h.reject("Transition cancelled")},h.promise},f=document.createElement("trans"),g={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},h={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return e.transitionEndEventName=d(g),e.animationEndEventName=d(h),e}]),angular.module("ui.bootstrap.modal",["ui.bootstrap.transition"]).factory("$$stackedMap",function(){return{createNew:function(){var a=[];return{add:function(b,c){a.push({key:b,value:c})},get:function(b){for(var c=0;c<a.length;c++)if(b==a[c].key)return a[c]},keys:function(){for(var b=[],c=0;c<a.length;c++)b.push(a[c].key);return b},top:function(){return a[a.length-1]},remove:function(b){for(var c=-1,d=0;d<a.length;d++)if(b==a[d].key){c=d;break}return a.splice(c,1)[0]},removeTop:function(){return a.splice(a.length-1,1)[0]},length:function(){return a.length}}}}}).directive("modalBackdrop",["$timeout",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",link:function(b){b.animate=!1,a(function(){b.animate=!0})}}}]).directive("modalWindow",["$modalStack","$timeout",function(a,b){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:"template/modal/window.html",link:function(c,d,e){c.windowClass=e.windowClass||"",b(function(){c.animate=!0,d[0].focus()}),c.close=function(b){var c=a.getTop();c&&c.value.backdrop&&"static"!=c.value.backdrop&&b.target===b.currentTarget&&(b.preventDefault(),b.stopPropagation(),a.dismiss(c.key,"backdrop click"))}}}}]).factory("$modalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function(a,b,c,d,e,f){function g(){for(var a=-1,b=n.keys(),c=0;c<b.length;c++)n.get(b[c]).value.backdrop&&(a=c);return a}function h(a){var b=c.find("body").eq(0),d=n.get(a).value;n.remove(a),j(d.modalDomEl,d.modalScope,300,i),b.toggleClass(m,n.length()>0)}function i(){if(k&&-1==g()){var a=l;j(k,l,150,function(){a.$destroy(),a=null}),k=void 0,l=void 0}}function j(c,d,e,f){function g(){g.done||(g.done=!0,c.remove(),f&&f())}d.animate=!1;var h=a.transitionEndEventName;if(h){var i=b(g,e);c.bind(h,function(){b.cancel(i),g(),d.$apply()})}else b(g,0)}var k,l,m="modal-open",n=f.createNew(),o={};return e.$watch(g,function(a){l&&(l.index=a)}),c.bind("keydown",function(a){var b;27===a.which&&(b=n.top(),b&&b.value.keyboard&&e.$apply(function(){o.dismiss(b.key)}))}),o.open=function(a,b){n.add(a,{deferred:b.deferred,modalScope:b.scope,backdrop:b.backdrop,keyboard:b.keyboard});var f=c.find("body").eq(0),h=g();h>=0&&!k&&(l=e.$new(!0),l.index=h,k=d("<div modal-backdrop></div>")(l),f.append(k));var i=angular.element("<div modal-window></div>");i.attr("window-class",b.windowClass),i.attr("index",n.length()-1),i.attr("animate","animate"),i.html(b.content);var j=d(i)(b.scope);n.top().value.modalDomEl=j,f.append(j),f.addClass(m)},o.close=function(a,b){var c=n.get(a).value;c&&(c.deferred.resolve(b),h(a))},o.dismiss=function(a,b){var c=n.get(a).value;c&&(c.deferred.reject(b),h(a))},o.dismissAll=function(a){for(var b=this.getTop();b;)this.dismiss(b.key,a),b=this.getTop()},o.getTop=function(){return n.top()},o}]).provider("$modal",function(){var a={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(b,c,d,e,f,g,h){function i(a){return a.template?d.when(a.template):e.get(a.templateUrl,{cache:f}).then(function(a){return a.data})}function j(a){var c=[];return angular.forEach(a,function(a){(angular.isFunction(a)||angular.isArray(a))&&c.push(d.when(b.invoke(a)))}),c}var k={};return k.open=function(b){var e=d.defer(),f=d.defer(),k={result:e.promise,opened:f.promise,close:function(a){h.close(k,a)},dismiss:function(a){h.dismiss(k,a)}};if(b=angular.extend({},a.options,b),b.resolve=b.resolve||{},!b.template&&!b.templateUrl)throw new Error("One of template or templateUrl options is required.");var l=d.all([i(b)].concat(j(b.resolve)));return l.then(function(a){var d=(b.scope||c).$new();d.$close=k.close,d.$dismiss=k.dismiss;var f,i={},j=1;b.controller&&(i.$scope=d,i.$modalInstance=k,angular.forEach(b.resolve,function(b,c){i[c]=a[j++]}),f=g(b.controller,i)),h.open(k,{scope:d,deferred:e,content:a[0],backdrop:b.backdrop,keyboard:b.keyboard,windowClass:b.windowClass})},function(a){e.reject(a)}),l.then(function(){f.resolve(!0)},function(){f.reject(!1)}),k},k}]};return a}),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(a){a.put("template/modal/backdrop.html",'<div class="modal-backdrop fade" ng-class="{in: animate}" ng-style="{\'z-index\': 1040 + index*10}"></div>')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(a){a.put("template/modal/window.html",'<div tabindex="-1" class="modal fade {{ windowClass }}" ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog"><div class="modal-content" ng-transclude></div></div>\n</div>')}]);